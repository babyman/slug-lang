

var assert = fn(a, msg = nil) {
    if ( a.type() == "BOOLEAN" && !a ) {
        if ( !msg ) {
            msg = a + " is not true";
        }
        throw AssertionError({msg: msg});
    }
}


var assertEqual = fn(a, b, msg = nil) {
    if ( a != b ) {
        if ( !msg ) {
            msg = a + " is not equal to " + b;
        }
        throw AssertionError({msg: msg});
    }
}


var assertListEqual = fn(a, b, msg = nil) {

    var eq = fn(a, b, idx = 0) {
        if(idx >= len(a) && len(a) == len(b)) {
            true;
        } else if(a[idx] == b[idx]) {
            eq(a, b, idx + 1);
        } else {
            false;
        }
    }

    if ( !(a == b || eq(a, b)) ) {
        if ( !msg ) {
            msg = "List '" + a + "' is not equal to '" + b + "'";
        }
        throw AssertionError({msg: msg});
    }
}


var fail = fn(msg = nil) {
    if ( !msg ) {
        msg = "Test failed!";
    }
    throw AssertionError({msg: msg});
}
