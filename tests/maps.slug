//
// declare a map
// -------------

var a = "key";
var f = fn(m) { m.age * 12}

var m1 = {name: "Angus", age: 15, [a]: "value", months: f};

// read keys using index notation
// ------------------------------
m1["name"].assertEqual("Angus");
m1["age"].assertEqual(15);

m1["missing"].assertEqual(nil);


// read a dynamic key value
// ------------------------
m1["key"].assertEqual("value");

// read a dynamic key using index notation
// ---------------------------------------
m1[a].assertEqual("value");


// access a key in a map
// ---------------------

m1.age.assertEqual(15);


// access and call a function saved in a map
// -----------------------------------------

//
// todo: the syntax i'd like:
//
// m1.months().assertEqual(180);
// 
// this would be great but because vars are untyped every call needs to check
// the caller to see if it's a map, this will slow the whole language down

m1["months"](m1).assertEqual(180);

(m1.months)(m1).assertEqual(180);
