var {*} = import(
	"slug.test",
	"slug.actor",
);

// 
// `spawnSrc` allows a string to be compiled and executed in a secure environment, the 
// string src is evaluated like any other Slug code BUT can only import modules that
// are expressly mentioned at creation time
// 
var srcActor = spawnSrc("""
var {*} = import("slug.std");
args /> reduce(0, fn(a,b) { a + b })
""", ["slug.std"]);

// a src actor is persist like any other actor, this allows it to efficiently handle
// multiple calls, defer can be used to remove it once it falls out of scope
defer terminate(srcActor);

// 
// lists and single argument messages to the src actor are bound to the `args` var in its
// execution environment.
//
srcActor /> send([1, 2, 3, 4, 5])
receive(100) /> assertEqual(15);
